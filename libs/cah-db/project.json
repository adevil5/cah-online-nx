{
  "name": "cah-db",
  "$schema": "../../node_modules/nx/schemas/project-schema.json",
  "sourceRoot": "libs/cah-db/src",
  "projectType": "library",
  "targets": {
    "build": {
      "executor": "@nx/js:tsc",
      "outputs": ["{options.outputPath}"],
      "options": {
        "outputPath": "dist/libs/cah-db",
        "main": "libs/cah-db/src/index.ts",
        "tsConfig": "libs/cah-db/tsconfig.lib.json",
        "assets": ["libs/cah-db/*.md"],
        "updateBuildableProjectDepsInPackageJson": true
      }
    },
    "lint": {
      "executor": "@nx/linter:eslint",
      "outputs": ["{options.outputFile}"],
      "options": {
        "lintFilePatterns": ["libs/cah-db/**/*.ts"]
      }
    },
    "test": {
      "executor": "@nx/jest:jest",
      "outputs": ["{workspaceRoot}/coverage/{projectRoot}"],
      "options": {
        "jestConfig": "libs/cah-db/jest.config.ts",
        "passWithNoTests": true
      },
      "configurations": {
        "ci": {
          "ci": true,
          "codeCoverage": true
        }
      }
    },
    "start": {
      "description": "Start the Supabase local development stack.",
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase start",
        "cwd": "libs/cah-db"
      }
    },
    "stop": {
      "description": "Stop the Supabase local development stack.",
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase stop",
        "cwd": "libs/cah-db"
      }
    },
    "gen:types:local": {
      "description": "Stop the Supabase local development stack.",
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase gen types typescript --local --schema public > src/generated/supabase-types.ts",
        "cwd": "libs/cah-db"
      }
    },
    "db:dump": {
      "description": "Dump contents from a remote database.",
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase db dump -f supabase/schema.sql --data-only",
        "cwd": "libs/cah-db"
      }
    },
    "db:push": {
      "description": "Push all local migrations to a remote database.",
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase db push",
        "cwd": "libs/cah-db"
      }
    },
    "db:reset": {
      "description": "Reset the local database to a clean state by recreating the local Postgres container and applying all local migrations found in supabase/migrations directory.",
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase db reset",
        "cwd": "libs/cah-db"
      }
    },
    "db:diff": {
      "description": "Generate a new migration file based on the differences between the local and remote database schemas using the migra tool.",
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase db diff --use-migra -f migration",
        "cwd": "libs/cah-db"
      },
      "configurations": {
        "local": {
          "command": "npx supabase db diff --use-migra -f migration --local",
          "cwd": "libs/cah-db"
        }
      }
    },
    "db:remote-commit": {
      "description": "Pull schema changes from a remote database and insert a new row into the migration history table.",
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase db remote commit",
        "cwd": "libs/cah-db"
      }
    },
    "migration:new": {
      "description": "Generate a new empty migration file.",
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase migration new",
        "cwd": "libs/cah-db"
      }
    },
    "migration:list": {
      "description": "List all local and remote migrations.",
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase migration list",
        "cwd": "libs/cah-db"
      }
    },
    "migration:up": {
      "description": "Apply all pending migrations to the local database.",
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase migration up",
        "cwd": "libs/cah-db"
      }
    }
  },
  "tags": []
}
